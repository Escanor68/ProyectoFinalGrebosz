rules_version = '2';
service cloud.firestore {
  match /databases/{database}/documents {
    // üõ°Ô∏è REGLAS DE PRODUCCI√ìN - SEGURAS
    // Estas reglas proporcionan seguridad adecuada para producci√≥n
    
    // Productos - lectura p√∫blica, escritura solo para administradores
    match /productos/{productoId} {
      allow read: if true;  // Cualquiera puede leer productos
      allow write: if request.auth != null && 
                   request.auth.token.admin == true;  // Solo admins pueden escribir
    }
    
    // √ìrdenes - lectura/escritura solo para usuarios autenticados
    match /orders/{orderId} {
      allow read, write: if request.auth != null;  // Usuarios autenticados
    }
    
    // Usuarios - cada usuario solo puede acceder a sus propios datos
    match /users/{userId} {
      allow read, write: if request.auth != null && 
                         request.auth.uid == userId;  // Solo el propietario
    }
    
    // Estad√≠sticas - solo lectura para usuarios autenticados
    match /stats/{statId} {
      allow read: if request.auth != null;
      allow write: if request.auth != null && 
                   request.auth.token.admin == true;
    }
    
    // üî• REGLAS PARA DESARROLLO (comentadas)
    // Descomenta estas reglas si necesitas acceso completo durante desarrollo:
    
    /*
    // Permitir lectura y escritura en todas las colecciones
    match /{document=**} {
      allow read, write: if true;
    }
    */
  }
} 